# Acl redis
Aclμ redis λ¨λ“μ€ κ³ μ„±λ¥, ν’λ¶€ν• μΈν„°νμ΄μ¤, μ‚¬μ©ν•κΈ° μ‰¬μ΄ κ°•λ ¥ν• redis ν΄λΌμ΄μ–ΈνΈ λΌμ΄λΈλ¬λ¦¬μ…λ‹λ‹¤. <br>
Acl redisλ” 13κ° μ΄μƒμ C++ ν΄λμ¤μ™€ 150κ° μ΄μƒμ λ…λ Ήμ–΄λ¥Ό μ§€μ›ν•©λ‹λ‹¤. 
* STRING, HASH, LIST, SET, ZSET, HyperLogLog, PUBSUB, STREAM, TRANSACTION, SCRIPT, CONNECTION, SERVER <br>
Acl redisλ¥Ό μ‚¬μ©ν•λ” μ‚¬μ©μλ” C++ STL ν‘μ¤€ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ²λΌ λ„¤νΈμ›ν¬ ν†µμ‹ , redis ν”„λ΅ν† μ½, ν•΄μ‹ μ¬λ΅― μΊμ‹± λ“±μ— λ€ν•΄ μ‹ κ²½ μ“Έ ν•„μ”κ°€ μ—†μµλ‹λ‹¤.

<br>
μ΄ λ¬Έμ„λ” ACL(Advanced C/C++ Library)μ—μ„ μ κ³µν•λ” Redis ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‚¬μ©ν•λ” λ°©λ²•μ„ μ¤‘μ μ μΌλ΅ λ‹¤λ£¨κ³  μμµλ‹λ‹¤.
<br><br>

**κµ¬μ²΄μ μΈ μ‹¤μµ μ½”λ“**λ” [**π“Redis μ‹¤μµ λ””λ ‰ν† λ¦¬**](../RedisServerAcl)μ— μ„μΉν•κ³  μμµλ‹λ‹¤.  <br>
**Redisμ— λ€ν• λ” μμ„Έν• μ„¤λ…**μ€ [**π“„Redisκ°€ μ§€μ›ν•λ” μλ£ν• λ° aclμ—μ„μ μ‚¬μ©λ²•**](./Acl-Redis-Data.md)μ„ μ°Έκ³ ν•μ„Έμ”.

---

### 1. ACL Redis ν΄λΌμ΄μ–ΈνΈ κ°μ”

ACL λΌμ΄λΈλ¬λ¦¬μ `lib_acl_cpp` λ¨λ“μ€ Redisμ™€ κ°™μ€ μ„λ²„μ™€ μƒνΈ μ‘μ©ν•κΈ° μ„ν• ν΄λΌμ΄μ–ΈνΈλ¥Ό μ κ³µν•©λ‹λ‹¤.  <br>
μ΄λ¥Ό ν†µν•΄ Redis μ„λ²„μ™€ μ—°κ²°ν•κ³  λ°μ΄ν„°λ¥Ό μ €μ¥ν•κ±°λ‚ μ΅°νν•  μ μμµλ‹λ‹¤. <br>
Acl redisλ” lib_acl_cppμ μΌλ¶€μ΄λ―€λ΅ μ‚¬μ©μλ” Acl ν”„λ΅μ νΈλ§ λΉλ“ν•λ©΄ λ©λ‹λ‹¤. <br>

### 2. κΈ°λ³Έ μ„¤μ • λ° μ΄κΈ°ν™”

λ¨Όμ €, ACL Redis ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‚¬μ©ν•λ ¤λ©΄ λΌμ΄λΈλ¬λ¦¬ μ΄κΈ°ν™”κ°€ ν•„μ”ν•©λ‹λ‹¤. μ΄λ¥Ό μ„ν•΄ `acl_cpp_init()` ν•¨μλ¥Ό νΈμ¶ν•΄μ•Ό ν•©λ‹λ‹¤.

```cpp
#include "acl_cpp/lib_acl.hpp"

int main() {
    acl::acl_cpp_init();  // ACL λΌμ΄λΈλ¬λ¦¬ μ΄κΈ°ν™”

    // Redis κ΄€λ ¨ μ½”λ“λ“¤...
}
```

### 3. Redis μ„λ²„ μ—°κ²° μ„¤μ •

Redis ν΄λΌμ΄μ–ΈνΈ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•κ³ , Redis μ„λ²„μ— μ—°κ²°ν•΄μ•Ό ν•©λ‹λ‹¤.

```cpp
const char* redis_addr = "127.0.0.1:6379";  // Redis μ„λ²„ μ£Όμ†
acl::redis_client client(redis_addr, 0, 0);  // Redis ν΄λΌμ΄μ–ΈνΈ κ°μ²΄ μƒμ„±

// μ—°κ²° μ‹κ°„ λ° μ½κΈ°/μ“°κΈ° νƒ€μ„μ•„μ›ƒ μ„¤μ •
client.set_timeout(10, 10);  // μ—°κ²° νƒ€μ„μ•„μ›ƒ, μ½κΈ°/μ“°κΈ° νƒ€μ„μ•„μ›ƒ μ„¤μ • (μ΄ λ‹¨μ„)
```

- `redis_addr`: Redis μ„λ²„μ μ£Όμ†μ™€ ν¬νΈμ…λ‹λ‹¤.
- `redis_client`: μ΄ κ°μ²΄λ¥Ό ν†µν•΄ Redisμ™€ μƒνΈμ‘μ©ν•©λ‹λ‹¤.
- `set_timeout`: Redis μ„λ²„μ™€μ μ—°κ²°μ— λ€ν• νƒ€μ„μ•„μ›ƒμ„ μ„¤μ •ν•©λ‹λ‹¤. (μ—°κ²°, μ½κΈ°, μ“°κΈ°)

### 4. λ°μ΄ν„° μ½κΈ°/μ“°κΈ°

ACL Redis ν΄λΌμ΄μ–ΈνΈλ¥Ό ν†µν•΄ Redis μ„λ²„μ— λ°μ΄ν„°λ¥Ό μ“°κ³ , μ½λ” λ°©λ²•μ„ λ³΄μ—¬λ“λ¦¬κ² μµλ‹λ‹¤.

#### 4.1. λ°μ΄ν„° μ“°κΈ°

λ‹¤μμ€ ν‚¤-κ°’ μμ„ Redisμ— μ €μ¥ν•λ” μμ μ…λ‹λ‹¤:

```cpp
acl::redis cmd(&client);  // Redis λ…λ Ή κ°μ²΄ μƒμ„±
bool result = cmd.set("my_key", "my_value");  // "my_key"λΌλ” ν‚¤μ— "my_value" μ €μ¥

if (!result) {
    std::cerr << "Failed to set key-value in Redis" << std::endl;
}
```

- `set`: Redisμ `SET` λ…λ Ήμ–΄μ™€ λ™μΌν•κ², νΉμ • ν‚¤μ— κ°’μ„ μ €μ¥ν•©λ‹λ‹¤.

#### 4.2. λ°μ΄ν„° μ½κΈ°

λ‹¤μμ€ Redisμ— μ €μ¥λ κ°’μ„ μ½μ–΄μ¤λ” μμ μ…λ‹λ‹¤:

```cpp
acl::string value;
bool result = cmd.get("my_key", value);  // "my_key"μ— ν•΄λ‹Ήν•λ” κ°’μ„ κ°€μ Έμ΄

if (result) {
    std::cout << "Value of 'my_key': " << value.c_str() << std::endl;
} else {
    std::cerr << "Failed to get value from Redis" << std::endl;
}
```

- `get`: Redisμ `GET` λ…λ Ήμ–΄μ™€ λ™μΌν•κ², νΉμ • ν‚¤μ— μ €μ¥λ κ°’μ„ κ°€μ Έμµλ‹λ‹¤.

### 5. μμ™Έ μ²λ¦¬ λ° μ¤λ¥ ν™•μΈ

ACL Redis ν΄λΌμ΄μ–ΈνΈλ” λ…λ Ή μ‹¤ν–‰ μ‹ μ¤λ¥κ°€ λ°μƒν•λ©΄ `false`λ¥Ό λ°ν™ν•©λ‹λ‹¤. μ¤λ¥λ¥Ό μ²λ¦¬ν•κΈ° μ„ν•΄ μ•„λμ™€ κ°™μ€ λ°©λ²•μΌλ΅ κ²°κ³Όλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤:

```cpp
if (!cmd.set("my_key", "my_value")) {
    std::cerr << "Error: " << cmd.result_error() << std::endl;
}
```

- `result_error`: λ§μ§€λ§‰ λ…λ Ήμ–΄ μ‹¤ν–‰ μ‹ λ°μƒν• μ¤λ¥ λ©”μ‹μ§€λ¥Ό λ°ν™ν•©λ‹λ‹¤.

### 6. ν΄λ¬μ¤ν„° λ¨λ“ μ‚¬μ© (μ„ νƒ μ‚¬ν•­)

Redis ν΄λ¬μ¤ν„° λ¨λ“λ¥Ό μ‚¬μ©ν•  κ²½μ°, `redis_client_cluster` κ°μ²΄λ¥Ό μ‚¬μ©ν•μ—¬ μ—¬λ¬ Redis λ…Έλ“μ— μ—°κ²°ν•  μ μμµλ‹λ‹¤.

```cpp
acl::redis_client_cluster cluster_client;
cluster_client.set("127.0.0.1:7000", 5);  // μ—¬λ¬ Redis λ…Έλ“ μ¶”κ°€

acl::redis cmd(&cluster_client);
```

- `set`: ν΄λ¬μ¤ν„° λ¨λ“μ—μ„ μ‚¬μ©ν•  λ…Έλ“μ™€ μ—°κ²°μ„ μ„¤μ •ν•©λ‹λ‹¤.

### 7. μΆ…λ£ μ²λ¦¬

μ‘μ—…μ΄ μ™„λ£λ ν›„μ—λ” μ‚¬μ©ν• Redis ν΄λΌμ΄μ–ΈνΈμ μ—°κ²°μ„ λ‹«μ•„μ•Ό ν•©λ‹λ‹¤. μ΄λ” `redis_client` κ°μ²΄κ°€ μ†λ©Έλ  λ• μλ™μΌλ΅ μ²λ¦¬λ©λ‹λ‹¤.


