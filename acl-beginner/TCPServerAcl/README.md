### TCP Echo Server with Acl

**TCPServerAcl** ν”„λ΅μ νΈλ” ACL(Advanced C/C++ Library) ν”„λ μ„μ›ν¬λ¥Ό μ‚¬μ©ν•μ—¬ κµ¬ν„ν• κ°„λ‹¨ν• TCP μ—μ½” μ„λ²„μ…λ‹λ‹¤. <br>
μ΄ μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° μμ‹ ν• λ°μ΄ν„°λ¥Ό κ·Έλ€λ΅ λ‹¤μ‹ ν΄λΌμ΄μ–ΈνΈμ—κ² λ°ν™ν•λ” κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤. <br>
μ΄ μ„λ²„μ ν΄λΌμ΄μ–ΈνΈλ” [π“CppConsoleClient λ””λ ‰ν† λ¦¬](../CppConsoleClient)μ— μ΅΄μ¬ν•©λ‹λ‹¤.

---

## ν”„λ΅μ νΈ κµ¬μ΅°

```
TCPServerAcl/
β”β”€β”€ TCPServerAcl.cpp  # ν”„λ΅μ νΈμ λ©”μΈ νμΌλ΅, μ„λ²„ μ΄κΈ°ν™” λ° μ‹¤ν–‰μ„ λ‹΄λ‹Ή
β”β”€β”€ tcp.cpp              # TCP μ„λ²„μ ν•µμ‹¬ κΈ°λ¥μ„ κµ¬ν„ν• νμΌ
β”β”€β”€ tcp.h                # TCP μ„λ²„ ν•¨μλ“¤μ μ„ μ–Έμ„ ν¬ν•¨ν• ν—¤λ” νμΌ
β”β”€β”€ pch.h                # ν”„λ΅μ νΈ μ „λ°μ—μ„ μ‚¬μ©λλ” κ³µν†µ ν—¤λ” νμΌ
```

---

## μ£Όμ” κΈ°λ¥

### 1. μ„λ²„ μ΄κΈ°ν™” λ° μ‹¤ν–‰ (`TCPServerAcl.cpp`)
- **λ©”μΈ μ—”νΈλ¦¬ ν¬μΈνΈ**: `main()` ν•¨μλ” ν”„λ΅κ·Έλ¨μ μ‹μ‘μ μΌλ΅, ACL λΌμ΄λΈλ¬λ¦¬ μ΄κΈ°ν™”μ™€ TCP μ„λ²„ μ‹¤ν–‰μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤.
- **μμ™Έ μ²λ¦¬**: μ„λ²„ μ‹¤ν–‰ μ¤‘ λ°μƒν•  μ μλ” μμ™Έλ¥Ό μ²λ¦¬ν•μ—¬ μ•μ •μ„±μ„ λ³΄μ¥ν•©λ‹λ‹¤.

### 2. ν΄λΌμ΄μ–ΈνΈ μ²λ¦¬ (`tcp.cpp`)
- **ν•Έλ“¤λ§ ν΄λΌμ΄μ–ΈνΈ**: `handle_client()` ν•¨μλ” ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ°μ΄ν„°λ¥Ό μμ‹ ν•κ³ , μ΄λ¥Ό λ‹¤μ‹ ν΄λΌμ΄μ–ΈνΈμ—κ² λ°ν™ν•λ” μ—μ½” κΈ°λ¥μ„ μν–‰ν•©λ‹λ‹¤.
- **μ„λ²„ μ‹¤ν–‰**: `run_tcp_server()` ν•¨μλ” μ„λ²„ μ†μΌ“μ„ μ΄κΈ°ν™”ν•κ³ , ν΄λΌμ΄μ–ΈνΈ μ—°κ²°μ„ λ€κΈ°ν•λ©°, κ° μ—°κ²°μ„ μƒλ΅μ΄ μ¤λ λ“μ—μ„ μ²λ¦¬ν•©λ‹λ‹¤.

### 3. κ³µν†µ ν—¤λ” νμΌ (`pch.h`)
- **ν”„λ¦¬μ»΄νμΌ ν—¤λ”**: μμ£Ό μ‚¬μ©λλ” ν‘μ¤€ λΌμ΄λΈλ¬λ¦¬μ™€ ACL λΌμ΄λΈλ¬λ¦¬μ ν—¤λ”λ¥Ό ν¬ν•¨ν•μ—¬ μ»΄νμΌ μ‹κ°„μ„ λ‹¨μ¶•ν•©λ‹λ‹¤.

---

## λΉλ“ λ° μ‹¤ν–‰

1. **λΉλ“**:
   - Visual Studioμ—μ„ μ†”λ£¨μ… νμΌ(`TCPServerAcl.sln`)μ„ μ—΄κ³ , `λΉλ“` λ©”λ‰΄μ—μ„ ν”„λ΅μ νΈλ¥Ό λΉλ“ν•©λ‹λ‹¤.

2. **μ‹¤ν–‰**:
   - λΉλ“κ°€ μ™„λ£λλ©΄, μ‹¤ν–‰ νμΌμ„ ν†µν•΄ μ„λ²„λ¥Ό μ‹μ‘ν•  μ μμµλ‹λ‹¤. μ„λ²„λ” κΈ°λ³Έμ μΌλ΅ `127.0.0.1:8088`μ—μ„ ν΄λΌμ΄μ–ΈνΈμ μ—°κ²°μ„ λ€κΈ°ν•©λ‹λ‹¤.

3. **ν΄λΌμ΄μ–ΈνΈ μ—°κ²°**:
   - ν΄λΌμ΄μ–ΈνΈ ν”„λ΅κ·Έλ¨μ„ ν†µν•΄ μ„λ²„μ— μ—°κ²°ν•κ³ , λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ©΄ μ„λ²„λ” ν•΄λ‹Ή λ°μ΄ν„°λ¥Ό κ·Έλ€λ΅ λ°ν™ν•©λ‹λ‹¤.

---

## μμ  μ½”λ“

**λ©”μΈ μ—”νΈλ¦¬ ν¬μΈνΈ:**

```cpp
int main() {
    try {
        SetConsoleOutputCP(CP_UTF8); // μ½μ†”μ μ½”λ“ νμ΄μ§€λ¥Ό UTF-8λ΅ μ„¤μ •
        acl::acl_cpp_init();  // ACL μ΄κΈ°ν™”
        run_tcp_server();  // TCP μ„λ²„ μ‹¤ν–‰ ν•¨μ νΈμ¶
    }
    catch (const std::exception& e) {
        std::cerr << "Standard exception: " << e.what() << std::endl;
    }
    catch (...) {
        std::cerr << "Unknown exception caught" << std::endl;
    }
    return 0;
}
```

**TCP μ„λ²„ μ‹¤ν–‰:**

```cpp
void run_tcp_server() {
    const char* addr = "127.0.0.1:8088";
    acl::server_socket server;

    if (!server.open(addr)) {
        std::print("Failed to open server socket on {}\n", addr);
        return;
    }

    std::print("Server is running on {}\n", addr);

    while (true) {
        acl::socket_stream* conn = server.accept(); // ν΄λΌμ΄μ–ΈνΈ μ—°κ²° λ€κΈ°
        if (conn == nullptr) {
            std::print("Failed to accept connection\n");
            continue;
        }

        std::thread client_thread(handle_client, conn);  // μƒ μ¤λ λ“μ—μ„ ν΄λΌμ΄μ–ΈνΈ μ²λ¦¬
        client_thread.detach();  // μ¤λ λ“λ¥Ό λ¶„λ¦¬ν•μ—¬ λ…λ¦½μ μΌλ΅ μ‹¤ν–‰λλ„λ΅ ν•¨
    }
}
```

---

## κ²°λ΅ 

TCPServerAcl ν”„λ΅μ νΈλ” κ°„λ‹¨ν• TCP μ—μ½” μ„λ²„λ¥Ό κµ¬ν„ν• μμ λ΅, ACL λΌμ΄λΈλ¬λ¦¬μ™€ C++μ λ©€ν‹°μ¤λ λ”© κΈ°λ¥μ„ ν™μ©ν•©λ‹λ‹¤. μ΄ ν”„λ΅μ νΈλ¥Ό ν†µν•΄ λ„¤νΈμ›ν¬ ν”„λ΅κ·Έλλ°μ κΈ°λ³Έμ μΈ κ°λ…μ„ μµνκ³ , ACL λΌμ΄λΈλ¬λ¦¬μ μ‚¬μ© λ°©λ²•μ„ ν•™μµν•  μ μμµλ‹λ‹¤.
